/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/@vizuaalog/bulmajs@0.12.1/src/plugins/modal.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Bulma from"../core";import Plugin from"../plugin";export class Modal extends Plugin{static parseDocument(){}static defaultConfig(){return{style:"card",closable:!0}}constructor(t,e){super(t,e),this.style=this.config.get("style"),this.root=this.config.get("root"),this.root.classList.contains("modal")||this.root.classList.add("modal"),this.parent?this.parent.appendChild(this.root):this.root.parentNode?this.parent=this.root.parentNode:(this.parent=document.body,this.parent.appendChild(this.root)),this.background=Bulma.findOrCreateElement(".modal-background",this.root),this.content="card"===this.style?Bulma.findOrCreateElement(".modal-card",this.root):Bulma.findOrCreateElement(".modal-content",this.root),this.closable=this.config.get("closable"),this.body=this.config.get("body"),this.title=this.config.get("title"),this.config.get("bodyUrl")?Bulma.ajax(this.config.get("bodyUrl")).then((t=>{this.body=t,this.buildModal()})):this.buildModal(),Bulma(this.root).data("modal",this),this.trigger("init")}buildModal(){"card"===this.style?this.createCardStructure():this.content.innerHTML||(this.content.innerHTML=this.body),this.closable&&(this.closeButton="card"===this.style?Bulma.findOrCreateElement(".delete",this.header,"button"):Bulma.findOrCreateElement(".modal-close",this.root,"button")),"card"===this.style&&this.createButtons(),this.setupEvents()}createCardStructure(){this.header=Bulma.findOrCreateElement(".modal-card-head",this.content,"header"),this.headerTitle=Bulma.findOrCreateElement(".modal-card-title",this.header,"p"),this.headerTitle.innerHTML||(this.headerTitle.innerHTML=this.title),this.cardBody=Bulma.findOrCreateElement(".modal-card-body",this.content,"section"),this.cardBody.innerHTML||(this.cardBody.innerHTML=this.body),this.footer=Bulma.findOrCreateElement(".modal-card-foot",this.content,"footer")}setupEvents(){this.closable&&(this.closeButton.addEventListener("click",this.close.bind(this)),this.keyupListenerBound=t=>this.keyupListener(t),document.addEventListener("keyup",this.keyupListenerBound),this.background.addEventListener("click",this.close.bind(this)))}createButtons(){var t=this.config.get("buttons",[]),e=this;Bulma.each(t,(function(t){var i=Bulma.createElement("button",t.classes);i.innerHTML=t.label,i.addEventListener("click",(function(e){t.onClick(e)})),e.footer.appendChild(i)}))}open(){this.root.classList.add("is-active"),document.documentElement.classList.add("is-clipped"),this.trigger("open")}close(){this.root.classList.remove("is-active"),document.documentElement.classList.remove("is-clipped"),this.trigger("close")}keyupListener(t){if(!this.root.classList.contains("is-active"))return;let e=t.key||t.keyCode;"Escape"!==e&&"Esc"!==e&&27!==e||this.close()}destroy(){super.destroy(),this.root.remove(),this.parent=null,this.root=null,this.background=null,this.content=null,"card"===this.style&&(this.header=null,this.headerTitle=null,this.cardBody=null,this.footer=null),this.closable&&(this.closeButton=null,document.removeEventListener("keyup",this.keyupListenerBound)),this.config.gets=[],this.trigger("destroyed")}}Bulma.registerPlugin("modal",Modal);export default Bulma;
//# sourceMappingURL=/sm/58f6798d1a7f0003ec55b2481405c60a7ca36fea6fb73b7e1b07713d6fe97dbc.map